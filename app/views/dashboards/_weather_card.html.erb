<div class="card h-100 shadow-sm">
  <div class="card-header text-white">
    <h5 class="card-title mb-1"><%= location.name %></h5>
    <small><i class="bi bi-geo-alt"></i> <%= location.timezone %></small>
  </div>
  <div class="card-body">
    <% metric = location.latest_weather %>

    <% if metric.present? %>
      <div class="row g-3">
        <div class="col-6">
          <div class="text-center p-3 bg-light rounded">
            <div class="fs-4 fw-bold text-dark">
              <i class="bi bi-thermometer-half text-danger"></i> <%= metric.temperature.round(1) %>Â°C
            </div>
            <div class="small text-muted text-uppercase mt-1">Temperature</div>
          </div>
        </div>
        <div class="col-6">
          <div class="text-center p-3 bg-light rounded">
            <div class="fs-4 fw-bold text-dark">
              <i class="bi bi-droplet-fill text-info"></i> <%= metric.humidity %>%
            </div>
            <div class="small text-muted text-uppercase mt-1">Humidity</div>
          </div>
        </div>
        <div class="col-6">
          <div class="text-center p-3 bg-light rounded">
            <div class="fs-4 fw-bold text-dark">
              <i class="bi bi-wind text-primary"></i> <%= metric.wind_speed.round(1) %>
            </div>
            <div class="small text-muted text-uppercase mt-1">Wind (km/h)</div>
          </div>
        </div>
        <div class="col-6">
          <div class="text-center p-3 bg-light rounded">
            <div class="fs-4 fw-bold text-dark">
              <i class="bi bi-cloud-rain text-secondary"></i> <%= metric.precipitation.round(1) %>
            </div>
            <div class="small text-muted text-uppercase mt-1">Rain (mm)</div>
          </div>
        </div>
      </div>

      <div class="text-center mt-3">
        <small class="text-muted">
          <i class="bi bi-clock"></i> Updated <%= time_ago_in_words(metric.recorded_at) %> ago
        </small>
      </div>
    <% else %>
      <div class="alert alert-warning mb-0">
        <i class="bi bi-exclamation-triangle"></i> No weather data available yet.
        <%= button_to sync_weather_path, method: :post, class: 'btn btn-primary btn-sm mt-2 w-100' do %>
          <i class="bi bi-cloud-download"></i> Fetch Data
        <% end %>
      </div>
    <% end %>
  </div>
</div>