<div class="card weather-card h-100">
  <div class="card-header">
    <h5 class="mb-1"><%= location.name %></h5>
    <small><i class="bi bi-geo-alt"></i> <%= location.timezone %></small>
  </div>
  <div class="card-body">
      <% metric = location.latest_weather %>

      <% if metric.present? %>
        <div class="row mb-3">
          <div class="col-6">
            <div class="metric-box">
              <div class="metric-value">
                <i class="bi bi-thermometer-half"></i> <%= metric.temperature.round(1) %>Â°C
              </div>
              <div class="metric-label">Temperature</div>
            </div>
          </div>
          <div class="col-6">
            <div class="metric-box">
              <div class="metric-value">
                <i class="bi bi-droplet-fill"></i> <%= metric.humidity %>%
              </div>
              <div class="metric-label">Humidity</div>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-6">
            <div class="metric-box">
              <div class="metric-value">
                <i class="bi bi-wind"></i> <%= metric.wind_speed.round(1) %>
              </div>
              <div class="metric-label">Wind (km/h)</div>
            </div>
          </div>
          <div class="col-6">
            <div class="metric-box">
              <div class="metric-value">
                <i class="bi bi-cloud-rain"></i> <%= metric.precipitation.round(1) %>
              </div>
              <div class="metric-label">Rain (mm)</div>
            </div>
          </div>
        </div>

        <div class="text-center">
          <small class="text-muted">
            <i class="bi bi-clock"></i> Updated <%= time_ago_in_words(metric.recorded_at) %> ago
          </small>
        </div>
      <% else %>
        <div class="alert alert-warning mb-0">
          <i class="bi bi-exclamation-triangle"></i> No weather data available yet.
          <%= button_to sync_weather_path, method: :post, class: 'btn btn-primary btn-sm mt-2 w-100' do %>
            <i class="bi bi-cloud-download"></i> Fetch Data
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>