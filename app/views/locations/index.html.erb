<div class="container-fluid px-4 py-4">
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="display-5">
        <i class="bi bi-geo-alt-fill"></i> Manage Locations
      </h1>
      <p class="text-muted">Add or remove weather monitoring locations</p>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-5 col-md-12 mb-4">
      <div class="card h-100">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="bi bi-plus-circle"></i> Add New Location</h5>
        </div>
        <div class="card-body">
          <%= form_with model: @location, local: true, class: 'needs-validation' do |f| %>
            <div class="mb-3">
              <%= f.label :name, class: 'form-label' %>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-pin-map"></i></span>
                <%= f.text_field :name, class: 'form-control', placeholder: 'e.g., New York', required: true %>
              </div>
            </div>

            <div class="mb-3">
              <%= f.label :latitude, class: 'form-label' %>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-compass"></i></span>
                <%= f.number_field :latitude, step: 0.000001, class: 'form-control', placeholder: 'e.g., 40.7128', required: true %>
              </div>
              <small class="text-muted">Range: -90 to 90</small>
            </div>

            <div class="mb-3">
              <%= f.label :longitude, class: 'form-label' %>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-compass"></i></span>
                <%= f.number_field :longitude, step: 0.000001, class: 'form-control', placeholder: 'e.g., -74.0060', required: true %>
              </div>
              <small class="text-muted">Range: -180 to 180</small>
            </div>

            <div class="mb-3">
              <%= f.label :timezone, class: 'form-label' %>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-clock"></i></span>
                <%= f.text_field :timezone, class: 'form-control', placeholder: 'e.g., America/New_York', required: true %>
              </div>
              <small class="text-muted">Format: Continent/City</small>
            </div>

            <div class="mb-3">
              <%= f.label :description, class: 'form-label' %>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-text-left"></i></span>
                <%= f.text_area :description, class: 'form-control', rows: 3, placeholder: 'Optional description...' %>
              </div>
            </div>

            <div class="d-grid">
              <%= f.submit 'Add Location', class: 'btn btn-success btn-lg' %>
            </div>
          <% end %>

          <div class="mt-3">
            <small class="text-muted">
              <i class="bi bi-info-circle"></i> <strong>Tip:</strong> Find coordinates on <a href="https://www.latlong.net/" target="_blank">LatLong.net</a> or Google Maps
            </small>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-7 col-md-12">
      <div class="card h-100">
        <div class="card-header bg-secondary text-white">
          <h5 class="mb-0">
            <i class="bi bi-list-ul"></i> Current Locations (<%= @locations.count %>)
          </h5>
        </div>
        <div class="card-body">
          <% if @locations.empty? %>
            <div class="text-center py-5">
              <i class="bi bi-inbox fs-1 text-muted mb-3 d-block"></i>
              <h4>No locations yet</h4>
              <p class="text-muted">Add your first location using the form on the left</p>
            </div>
          <% else %>
            <div class="list-group">
              <% @locations.each do |location| %>
                <div class="location-item">
                  <div class="d-flex justify-content-between align-items-start">
                    <div class="location-info flex-grow-1">
                      <h4><i class="bi bi-geo-alt-fill text-primary"></i> <%= location.name %></h4>
                      <div class="location-details">
                        <span><i class="bi bi-compass"></i> <strong>Lat:</strong> <%= location.latitude.round(4) %></span>
                        <span><i class="bi bi-compass"></i> <strong>Lon:</strong> <%= location.longitude.round(4) %></span>
                        <span><i class="bi bi-clock"></i> <%= location.timezone %></span>
                      </div>
                      <% if location.description.present? %>
                        <p class="text-muted mb-0 mt-2"><%= location.description %></p>
                      <% end %>
                    </div>
                    <div class="location-actions">
                      <%= button_to location_path(location), method: :delete,
                          data: { turbo_confirm: "Are you sure you want to delete #{location.name}?" },
                          class: 'btn btn-danger btn-sm' do %>
                        <i class="bi bi-trash"></i> Delete
                      <% end %>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
