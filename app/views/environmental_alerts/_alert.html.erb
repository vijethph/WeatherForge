<div id="alert_<%= alert.id %>" class="card mb-3 border-<%= alert.severity_color %>">
  <div class="card-header bg-<%= alert.severity_color %> bg-opacity-10">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h5 class="mb-0">
          <i class="bi bi-exclamation-triangle text-<%= alert.severity_color %>"></i>
          <%= alert.alert_type.humanize %>
        </h5>
        <small class="text-muted">
          Sensor: <%= link_to alert.environmental_sensor.name, environmental_sensor_path(alert.environmental_sensor) %>
        </small>
      </div>
      <div>
        <span class="badge bg-<%= alert.severity_color %> fs-6">
          <%= alert.severity.upcase %>
        </span>
        <% if alert.resolved_at %>
          <span class="badge bg-success fs-6 ms-2">RESOLVED</span>
        <% else %>
          <span class="badge bg-danger fs-6 ms-2">ACTIVE</span>
        <% end %>
      </div>
    </div>
  </div>
  <div class="card-body">
    <p class="card-text"><%= alert.message %></p>
    <div class="d-flex justify-content-between align-items-center">
      <small class="text-muted">
        Created <%= time_ago_in_words(alert.created_at) %> ago
        <% if alert.resolved_at %>
          | Resolved <%= time_ago_in_words(alert.resolved_at) %> ago
        <% end %>
      </small>
      <div>
        <%= link_to "View Details", environmental_alert_path(alert), class: "btn btn-sm btn-outline-primary me-2" %>
        <% unless alert.resolved_at %>
          <%= button_to "Resolve", resolve_environmental_alert_path(alert),
              method: :patch,
              class: "btn btn-sm btn-success",
              data: { turbo_confirm: "Mark this alert as resolved?" } %>
        <% end %>
      </div>
    </div>
  </div>
</div>
